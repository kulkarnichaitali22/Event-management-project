{"ast":null,"code":"import _slicedToArray from\"A:\\\\CDAC-EMS-Project-main\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import axios from\"axios\";import{useState}from\"react\";import{useHistory}from\"react-router-dom\";import{url}from\"../common/constants\";import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import\"./EmpLogin.css\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";toast.configure();var ForgotPassword=function ForgotPassword(e){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setemail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),cpassword=_useState6[0],setcPassword=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),otp=_useState8[0],setotp=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),confirmOtp=_useState10[0],setConfirmotp=_useState10[1];var GenerateAndSendOTP=function GenerateAndSendOTP(){console.log(email);toast.info(\"Sending OTP on your Email...\");axios.get(url+\"/generateotp/\"+email).then(function(Response){console.log(Response.data);setConfirmotp(Response.data);toast.success(\"OTP has been sent to your email\");}).catch(function(error){console.log('Something went wrong',error);});};var HandleOtp=function HandleOtp(){if(confirmOtp==otp){if(password==cpassword){var Credential={email:email,password:password};axios.put(url+\"/changepassword\",Credential).then(function(Response){console.log(Response.data);Swal.fire('Password Changed Successfully','','success');history.push(\"/\");}).catch(function(error){console.log('Something went wrong',error);});}else{console.log(\"password and confirm password not matched\");Swal.fire({icon:'error',title:'Please Cofirm Password same as Password',text:'',footer:''});}}else{console.log(\"wrong otp\");Swal.fire({icon:'error',title:'Please Enter Correct OTP',text:'',footer:''});}};return/*#__PURE__*/_jsx(\"div\",{className:\"forms-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 mt-3 position-absolute top-50 start-50 translate-middle loginform\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Forgot Password ?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-4 mx-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",className:\"form-label mb-0 h5\",children:\"Enter Email\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"input-fields-l w-75\",id:\"Email\",\"aria-describedby\":\"emailHelp\",value:email,onChange:function onChange(e){setemail(e.target.value);}}),\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-l bg-success\",onClick:GenerateAndSendOTP,children:\"Get otp\"})]})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2 mt-4 mx-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label mb-0 h5\",children:\"Enter New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input-fields-l\",id:\"password\",value:password,onChange:function onChange(e){setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2 mx-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"cpassword\",className:\"form-label mb-0 h5\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input-fields-l\",id:\"cpassword\",value:cpassword,onChange:function onChange(e){setcPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-5\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"otp\",className:\"form-label mb-0 h5\",children:\"Enter OTP\"}),\"\\xA0\\xA0\",/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input-fields-l w-75\",id:\"otp\",value:otp,onChange:function onChange(e){setotp(e.target.value);}}),\"\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-l bg-primary\",onClick:HandleOtp,children:\"Confirm\"})]})]})]})});};export default ForgotPassword;","map":{"version":3,"sources":["A:/CDAC-EMS-Project-main/frontend/src/component/login/ForgotPassword.js"],"names":["axios","useState","useHistory","url","toast","Swal","configure","ForgotPassword","e","history","email","setemail","password","setPassword","cpassword","setcPassword","otp","setotp","confirmOtp","setConfirmotp","GenerateAndSendOTP","console","log","info","get","then","Response","data","success","catch","error","HandleOtp","Credential","put","fire","push","icon","title","text","footer","target","value"],"mappings":"+HAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,GAAT,KAAoB,qBAApB,CACA,OAAQC,KAAR,KAAoB,gBAApB,CACA,MAAO,uCAAP,CACA,MAAO,gBAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,C,wFAEAD,KAAK,CAACE,SAAN,GACA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,CAAD,CAAO,CAC1B,GAAMC,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CACA,cAA0BD,QAAQ,CAAC,EAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eACA,eAAgCV,QAAQ,CAAC,EAAD,CAAxC,yCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAAkCZ,QAAQ,CAAC,EAAD,CAA1C,yCAAOa,SAAP,eAAkBC,YAAlB,eACA,eAAsBd,QAAQ,CAAC,EAAD,CAA9B,yCAAOe,GAAP,eAAYC,MAAZ,eACA,eAAoChB,QAAQ,CAAC,EAAD,CAA5C,0CAAOiB,UAAP,gBAAmBC,aAAnB,gBACA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC7BC,OAAO,CAACC,GAAR,CAAYZ,KAAZ,EACAN,KAAK,CAACmB,IAAN,CAAW,8BAAX,EACAvB,KAAK,CAACwB,GAAN,CAAUrB,GAAG,CAAG,eAAN,CAAwBO,KAAlC,EACKe,IADL,CACU,SAAAC,QAAQ,CAAI,CACdL,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,IAArB,EACAR,aAAa,CAACO,QAAQ,CAACC,IAAV,CAAb,CACAvB,KAAK,CAACwB,OAAN,CAAc,iCAAd,EACH,CALL,EAMKC,KANL,CAMW,SAAAC,KAAK,CAAI,CACZT,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAAoCQ,KAApC,EACH,CARL,EASH,CAZD,CAaA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpB,GAAIb,UAAU,EAAIF,GAAlB,CAAuB,CACnB,GAAIJ,QAAQ,EAAIE,SAAhB,CAA2B,CACvB,GAAMkB,CAAAA,UAAU,CAAG,CAAEtB,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAAnB,CACAZ,KAAK,CAACiC,GAAN,CAAU9B,GAAG,CAAG,iBAAhB,CAAmC6B,UAAnC,EAA+CP,IAA/C,CAAoD,SAAAC,QAAQ,CAAI,CAC5DL,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,IAArB,EACAtB,IAAI,CAAC6B,IAAL,CACI,+BADJ,CAEI,EAFJ,CAGI,SAHJ,EAKEzB,OAAO,CAAC0B,IAAR,CAAa,GAAb,EACD,CARL,EASKN,KATL,CASW,SAAAC,KAAK,CAAI,CACZT,OAAO,CAACC,GAAR,CAAY,sBAAZ,CAAoCQ,KAApC,EACH,CAXL,EAYH,CAdD,IAeI,CACAT,OAAO,CAACC,GAAR,CAAY,2CAAZ,EACAjB,IAAI,CAAC6B,IAAL,CAAU,CACNE,IAAI,CAAE,OADA,CAENC,KAAK,CAAE,yCAFD,CAGNC,IAAI,CAAE,EAHA,CAINC,MAAM,CAAE,EAJF,CAAV,EAMH,CACJ,CAzBD,IAyBK,CACDlB,OAAO,CAACC,GAAR,CAAY,WAAZ,EACAjB,IAAI,CAAC6B,IAAL,CAAU,CACNE,IAAI,CAAE,OADA,CAENC,KAAK,CAAE,0BAFD,CAGNC,IAAI,CAAE,EAHA,CAINC,MAAM,CAAE,EAJF,CAAV,EAMH,CACJ,CAnCD,CAoCA,mBACI,YAAK,SAAS,CAAC,iBAAf,uBAEI,aAAK,SAAS,CAAC,uEAAf,wBAEI,yCAFJ,cAKI,aAAK,SAAS,CAAC,WAAf,wBACI,cAAO,OAAO,CAAC,OAAf,CAAuB,SAAS,CAAC,oBAAjC,yBADJ,cAEI,oCACI,cAAO,IAAI,CAAC,OAAZ,CAAoB,SAAS,CAAC,qBAA9B,CAAoD,EAAE,CAAC,OAAvD,CAA+D,mBAAiB,WAAhF,CAA4F,KAAK,CAAE7B,KAAnG,CAA0G,QAAQ,CAAE,kBAACF,CAAD,CAAO,CAAEG,QAAQ,CAACH,CAAC,CAACgC,MAAF,CAASC,KAAV,CAAR,CAA0B,CAAvJ,EADJ,yBAEI,eAAQ,SAAS,CAAC,sBAAlB,CAAyC,OAAO,CAAErB,kBAAlD,qBAFJ,GAFJ,GALJ,cAaI,uCAbJ,cAgBI,aAAK,SAAS,CAAC,gBAAf,wBACI,cAAO,OAAO,CAAC,UAAf,CAA0B,SAAS,CAAC,oBAApC,gCADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,gBAAjC,CAAkD,EAAE,CAAC,UAArD,CAAgE,KAAK,CAAER,QAAvE,CAAiF,QAAQ,CAAE,kBAACJ,CAAD,CAAO,CAAEK,WAAW,CAACL,CAAC,CAACgC,MAAF,CAASC,KAAV,CAAX,CAA6B,CAAjI,EAFJ,GAhBJ,cAoBI,aAAK,SAAS,CAAC,WAAf,wBACI,cAAO,OAAO,CAAC,WAAf,CAA2B,SAAS,CAAC,oBAArC,kCADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,SAAS,CAAC,gBAAjC,CAAkD,EAAE,CAAC,WAArD,CAAiE,KAAK,CAAE3B,SAAxE,CAAmF,QAAQ,CAAE,kBAACN,CAAD,CAAO,CAAEO,YAAY,CAACP,CAAC,CAACgC,MAAF,CAASC,KAAV,CAAZ,CAA8B,CAApI,EAFJ,GApBJ,cAwBI,aAAK,SAAS,CAAC,MAAf,wBACI,cAAO,OAAO,CAAC,KAAf,CAAqB,SAAS,CAAC,oBAA/B,uBADJ,yBAEI,oCACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,qBAA7B,CAAmD,EAAE,CAAC,KAAtD,CAA4D,KAAK,CAAEzB,GAAnE,CAAwE,QAAQ,CAAE,kBAACR,CAAD,CAAO,CAAES,MAAM,CAACT,CAAC,CAACgC,MAAF,CAASC,KAAV,CAAN,CAAwB,CAAnH,EADJ,iCAEI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,sBAAhC,CAAuD,OAAO,CAAEV,SAAhE,qBAFJ,GAFJ,GAxBJ,GAFJ,EADJ,CA4CH,CApGD,CAqGA,cAAexB,CAAAA,cAAf","sourcesContent":["import axios from \"axios\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { url } from \"../common/constants\";\nimport {toast} from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport \"./EmpLogin.css\"\nimport Swal from \"sweetalert2\";\n\ntoast.configure();\nconst ForgotPassword = (e) => {\n    const history = useHistory();\n    const [email, setemail] = useState(\"\")\n    const [password, setPassword] = useState(\"\")\n    const [cpassword, setcPassword] = useState(\"\")\n    const [otp, setotp] = useState(\"\")\n    const [confirmOtp, setConfirmotp] = useState(\"\")\n    const GenerateAndSendOTP = () => {\n        console.log(email);\n        toast.info(\"Sending OTP on your Email...\");\n        axios.get(url + \"/generateotp/\" + email)\n            .then(Response => {\n                console.log(Response.data);\n                setConfirmotp(Response.data);\n                toast.success(\"OTP has been sent to your email\");\n            })\n            .catch(error => {\n                console.log('Something went wrong', error);\n            })\n    };\n    const HandleOtp = () => {\n        if (confirmOtp == otp) {\n            if (password == cpassword) {\n                const Credential = { email, password }\n                axios.put(url + \"/changepassword\", Credential).then(Response => {\n                    console.log(Response.data);\n                    Swal.fire(\n                        'Password Changed Successfully',\n                        '',\n                        'success'\n                      )\n                      history.push(\"/\")\n                    })\n                    .catch(error => {\n                        console.log('Something went wrong', error);\n                    })\n            }\n            else{ \n                console.log(\"password and confirm password not matched\");\n                Swal.fire({\n                    icon: 'error',\n                    title: 'Please Cofirm Password same as Password',\n                    text: '',\n                    footer: ''\n                })\n            }\n        }else{\n            console.log(\"wrong otp\");\n            Swal.fire({\n                icon: 'error',\n                title: 'Please Enter Correct OTP',\n                text: '',\n                footer: ''\n              })\n        }\n    }\n    return (\n        <div className=\"forms-container\">\n\n            <div className=\"p-3 mt-3 position-absolute top-50 start-50 translate-middle loginform\">\n\n                <h2>\n                    Forgot Password ?\n                </h2>\n                <div className=\"my-4 mx-5\">\n                    <label htmlFor=\"Email\" className=\"form-label mb-0 h5\">Enter Email</label>\n                    <div>\n                        <input type=\"email\" className=\"input-fields-l w-75\" id=\"Email\" aria-describedby=\"emailHelp\" value={email} onChange={(e) => { setemail(e.target.value) }} />&nbsp;&nbsp;\n                        <button className=\"btn btn-l bg-success\" onClick={GenerateAndSendOTP}>Get otp</button>\n                    </div>\n                </div>\n\n                <h2>\n                    Change Password\n                </h2>\n                <div className=\"mb-2 mt-4 mx-5\">\n                    <label htmlFor=\"password\" className=\"form-label mb-0 h5\">Enter New Password</label>\n                    <input type=\"password\" className=\"input-fields-l\" id=\"password\" value={password} onChange={(e) => { setPassword(e.target.value) }} />\n                </div>\n                <div className=\"mb-2 mx-5\">\n                    <label htmlFor=\"cpassword\" className=\"form-label mb-0 h5\">Confirm New Password</label>\n                    <input type=\"password\" className=\"input-fields-l\" id=\"cpassword\" value={cpassword} onChange={(e) => { setcPassword(e.target.value) }} />\n                </div>\n                <div className=\"mx-5\">\n                    <label htmlFor=\"otp\" className=\"form-label mb-0 h5\">Enter OTP</label>&nbsp;&nbsp;\n                    <div>\n                        <input type=\"text\" className=\"input-fields-l w-75\" id=\"otp\" value={otp} onChange={(e) => { setotp(e.target.value) }} />&nbsp;&nbsp;&nbsp;&nbsp;\n                        <button type=\"button\" className=\"btn btn-l bg-primary\" onClick={HandleOtp}>Confirm</button>\n                    </div>\n                </div>\n\n\n\n\n\n            </div>\n        </div>\n\n\n    )\n}\nexport default ForgotPassword;"]},"metadata":{},"sourceType":"module"}