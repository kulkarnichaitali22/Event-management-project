{"ast":null,"code":"import _slicedToArray from\"A:\\\\CDAC-EMS-Project-main\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from\"react\";import authHeader from\"../services/auth-header\";import axios from\"axios\";import\"./LoginRegister.css\";import log from\"../../images/log.svg\";import{Link,useHistory}from\"react-router-dom\";import{url}from\"../common/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EmployeeLogin=function EmployeeLogin(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setemail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setpassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],seterror=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),errortype=_useState8[0],seterrortype=_useState8[1];if(localStorage.getItem('jwttoken')&&localStorage.getItem('role')===\"ADMIN\"){history.push(\"/admin/welcome\");}else if(localStorage.getItem('jwttoken')&&localStorage.getItem('role')===\"MANAGER\"){history.push(\"/manager/welcome\");}else if(localStorage.getItem('jwttoken')&&localStorage.getItem('role')===\"EMPLOYEE\"){history.push(\"/employee/welcome\");}else if(localStorage.getItem('jwttoken')&&localStorage.getItem('role')===\"CUSTOMER\"){history.push(\"/customer/welcome\");}var Login=function Login(e){e.preventDefault();var employee={email:email,password:password};axios.post(url+\"/login\",employee,{authHeader:authHeader}).then(function(Response){console.log(Response.data.role);console.log(Response.data.jwt);if(Response.data.jwt&&Response.status==200){localStorage.setItem('jwttoken',JSON.stringify(Response.data.jwt));if(Response.data.role=='[ROLE_MANAGER]'){localStorage.setItem('role',\"MANAGER\");history.push(\"manager/welcome\");}else if(Response.data.role=='[ROLE_EMPLOYEE]'){localStorage.setItem('role',\"EMPLOYEE\");history.push(\"employee/welcome\");}else if(Response.data.role=='[ROLE_ADMIN]'){localStorage.setItem('role',\"ADMIN\");history.push(\"admin/welcome\");}else{seterrortype(\"alert-box\");seterror(\"INVALID CREDENTIALS or AUTHORITY\");}}}).catch(function(error){setemail(\"\");setpassword(\"\");seterror(\"INVALID CREDENTIALS\");seterrortype(\"alert-box\");console.log('Something went wrong',error);});};useEffect(function(){var container=document.querySelector(\".container-l\");});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-l\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"forms-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"signin-signup\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"#\",className:\"sign-in-form l-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title fw-bold\",children:\"Team Sign In\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input-fields-l\",placeholder:\"Email\",value:email,onChange:function onChange(e){setemail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input-fields-l\",placeholder:\"Password\",value:password,onChange:function onChange(e){setpassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",className:\"btn-l solid\",onClick:Login}),/*#__PURE__*/_jsx(Link,{className:\"btn text-white\",to:\"/forgotpassword\",children:\"Forgot Password ?\"}),/*#__PURE__*/_jsx(\"div\",{className:errortype,role:\"alert\",children:error})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"panels-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"panel left-panel\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"content pt-5\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"pt-5 pb-3\",children:\"Hello, Folks!\"})}),/*#__PURE__*/_jsx(\"img\",{src:log,className:\"image-l\",alt:\"\"})]})})]})});};export default EmployeeLogin;","map":{"version":3,"sources":["A:/CDAC-EMS-Project-main/frontend/src/component/login/EmployeeLogin.js"],"names":["React","useEffect","useState","authHeader","axios","log","Link","useHistory","url","EmployeeLogin","history","email","setemail","password","setpassword","error","seterror","errortype","seterrortype","localStorage","getItem","push","Login","e","preventDefault","employee","post","then","Response","console","data","role","jwt","status","setItem","JSON","stringify","catch","container","document","querySelector","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport authHeader from \"../services/auth-header\";\nimport axios from \"axios\";\nimport \"./LoginRegister.css\";\nimport log from \"../../images/log.svg\"\nimport { Link, useHistory } from \"react-router-dom\";\nimport { url } from \"../common/constants\";\n\nconst EmployeeLogin = () => {\n\n\n\n\n\n\n  const history = useHistory();\n  const [email, setemail] = useState(\"\");\n  const [password, setpassword] = useState(\"\");\n  const [error, seterror] = useState(\"\");\n  const [errortype, seterrortype] = useState(\"\");\n\n  if( localStorage.getItem('jwttoken') && localStorage.getItem('role')===\"ADMIN\"){\n    history.push(\"/admin/welcome\")\n  }else if( localStorage.getItem('jwttoken') && localStorage.getItem('role')===\"MANAGER\"){\n    history.push(\"/manager/welcome\")\n  }else if( localStorage.getItem('jwttoken') && localStorage.getItem('role')===\"EMPLOYEE\"){\n    history.push(\"/employee/welcome\")\n  }else if(localStorage.getItem('jwttoken') && localStorage.getItem('role')===\"CUSTOMER\" ) {\n    history.push(\"/customer/welcome\");\n  }\n   \n  \n\n \n\n\n  const Login = (e) => {\n    e.preventDefault();\n    const employee = { email, password };\n    axios.post(url + \"/login\", employee, { authHeader }).then((Response) => {\n      console.log(Response.data.role);\n\n      console.log(Response.data.jwt);\n      if (Response.data.jwt && Response.status == 200) {\n        localStorage.setItem('jwttoken', JSON.stringify(Response.data.jwt));\n        if (Response.data.role == '[ROLE_MANAGER]') {\n          localStorage.setItem('role', \"MANAGER\");\n          history.push(\"manager/welcome\");\n        }\n        else if (Response.data.role == '[ROLE_EMPLOYEE]') {\n          localStorage.setItem('role', \"EMPLOYEE\");\n          history.push(\"employee/welcome\")\n        }\n        else if (Response.data.role == '[ROLE_ADMIN]') {\n          localStorage.setItem('role', \"ADMIN\");\n          history.push(\"admin/welcome\")\n        }\n        else {\n          seterrortype(\"alert-box\");\n          seterror(\"INVALID CREDENTIALS or AUTHORITY\")\n        }\n      }\n    }\n    ).catch(error => {\n      setemail(\"\");\n      setpassword(\"\");\n      seterror(\"INVALID CREDENTIALS\");\n      seterrortype(\"alert-box\");\n      console.log('Something went wrong', error);\n    });\n\n  }\n\n  useEffect(() => {\n    const container = document.querySelector(\".container-l\");\n  });\n  return (\n    <div>\n      <div className=\"container-l\">\n        <div className=\"forms-container\">\n          <div className=\"signin-signup\">\n            <form action=\"#\" className=\"sign-in-form l-form\">\n              <h2 className=\"title fw-bold\">Team Sign In</h2>\n              <input type=\"text\" className=\"input-fields-l\" placeholder=\"Email\" value={email} onChange={(e) => { setemail(e.target.value) }} />\n              <input type=\"password\" className=\"input-fields-l\" placeholder=\"Password\" value={password} onChange={(e) => { setpassword(e.target.value) }} />\n              <input type=\"submit\" value=\"Login\" className=\"btn-l solid\" onClick={Login} />\n              <Link className=\"btn text-white\" to={\"/forgotpassword\"}>Forgot Password ?</Link>\n              <div className={errortype} role=\"alert\">{error}</div>\n            </form>\n          </div>\n        </div>\n\n        <div className=\"panels-container\">\n          <div className=\"panel left-panel\">\n            <div className=\"content pt-5\">\n              <h1 className=\"pt-5 pb-3\">Hello, Folks!</h1>\n\n            </div>\n            <img src={log} className=\"image-l\" alt=\"\" />\n          </div>\n\n        </div>\n      </div>\n\n    </div>\n  );\n}\nexport default EmployeeLogin;\n"]},"metadata":{},"sourceType":"module"}