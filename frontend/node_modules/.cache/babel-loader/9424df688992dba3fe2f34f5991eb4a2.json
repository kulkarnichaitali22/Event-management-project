{"ast":null,"code":"import _slicedToArray from\"A:\\\\CDAC-EMS-Project-main\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./LoginRegister.css\";import authHeader from\"../services/auth-header\";import log from\"../../images/log.svg\";import birthdaygif from\"../../images/birthdaygif.gif\";import register from\"../../images/register.svg\";import{useHistory}from\"react-router-dom\";import{url}from\"../common/constants\";import{Link}from\"react-router-dom\";import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";toast.configure();var CustLoginRegister=function CustLoginRegister(){var history=useHistory();var reset=function reset(){setname(\"\");setemail(\"\");setcontactNumber(\"\");setdob(\"\");setadharNumber(\"\");setpassword(\"\");setCpassword(\"\");};var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setname=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setemail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),contactNumber=_useState6[0],setcontactNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),dob=_useState8[0],setdob=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),adharNumber=_useState10[0],setadharNumber=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setpassword=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),cPassword=_useState14[0],setCpassword=_useState14[1];var role=\"CUSTOMER\";var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),error=_useState16[0],seterror=_useState16[1];var _useState17=useState(\"\"),_useState18=_slicedToArray(_useState17,2),errortype=_useState18[0],seterrortype=_useState18[1];// for session management\nif(localStorage.getItem('jwttoken')&&localStorage.getItem('role')===\"CUSTOMER\"){history.push(\"/customer/welcome\");}if(localStorage.getItem('jwttoken')&&localStorage.getItem('role')===\"ADMIN\"){history.push(\"/admin/welcome\");}else if(localStorage.getItem('jwttoken')&&localStorage.getItem('role')===\"MANAGER\"){history.push(\"/manager/welcome\");}else if(localStorage.getItem('jwttoken')&&localStorage.getItem('role')===\"EMPLOYEE\"){history.push(\"/employee/welcome\");}var login=function login(e){e.preventDefault();var customer={email:email,password:password};axios.post(url+\"/login\",customer,{authHeader:authHeader}).then(function(Response){if(Response.data.jwt)localStorage.setItem('jwttoken',JSON.stringify(Response.data.jwt));if(Response.data.role=='[ROLE_CUSTOMER]'){localStorage.setItem('role',\"CUSTOMER\");history.push(\"/customer/welcome\");}else{setemail(\"\");setpassword(\"\");seterror(\"INVALID CREDENTIALS or AUTHORITY\");seterrortype(\"alert-box\");console.log('Something went wrong',error);}}).catch(function(error){setemail(\"\");setpassword(\"\");seterror(\"INVALID CREDENTIALS\");seterrortype(\"alert-box\");console.log('Something went wrong',error);});};var registerCustomer=function registerCustomer(e){e.preventDefault();var Eerror=document.getElementById(\"Eerror\");if(/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email)){Eerror.textContent=\"\";if(/[1236547890!@#$%^&*()+=:;\"'<,>/_]/.test(name)){console.log(\"invalid Name\");Swal.fire({icon:'error',title:'Only Alphabates and spaces are allowed in Name',text:'',footer:''});}else{if(password.length>5){if(password===cPassword){if(contactNumber.length==10&&adharNumber.length==12){var customer={name:name,email:email,contactNumber:contactNumber,dob:dob,adharNumber:adharNumber,password:password,role:role};toast.info(\"Registering Your Details, Please wait for a while.....\");axios.post(url+\"/registration\",customer).then(function(Response){Swal.fire(' You are Registered Successfully','','success');history.push(\"/customer\");var container=document.querySelector(\".container-l\");container.classList.remove(\"sign-up-mode\");}).catch(function(error){reset();Swal.fire({icon:'error',title:'Something Went Wrong',text:'',footer:''});});}else{if(contactNumber.length!=10){console.log(\"invalid Contact Number\");Swal.fire({icon:'error',title:'Please Check, Contact Number must be 10 digit',text:'',footer:''});}else if(adharNumber.length!=12){console.log(\"invalid Adhar Number\");Swal.fire({icon:'error',title:'Please Check, Adhar Number must be 12 digit',text:'',footer:''});}}}else{console.log(\"invalid password not matched\");Swal.fire({icon:'error',title:'Please Check Confirm Password should be same as Password',text:'',footer:''});}}else{console.log(\"invalid password length\");Swal.fire({icon:'error',title:'Password Length should be greater than 5',text:'',footer:''});}}}else{Eerror.textContent=\"You have entered an invalid email address!\";Eerror.style.color=\"red\";}};useEffect(function(){var sign_in_btn=document.querySelector(\"#sign-in-btn\");var sign_up_btn=document.querySelector(\"#sign-up-btn\");var container=document.querySelector(\".container-l\");sign_up_btn.addEventListener(\"click\",function(){container.classList.add(\"sign-up-mode\");});sign_in_btn.addEventListener(\"click\",function(){container.classList.remove(\"sign-up-mode\");});});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-l\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"forms-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"signin-signup\",children:[/*#__PURE__*/_jsxs(\"form\",{action:\"#\",className:\"sign-in-form l-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title fw-bold\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input-fields-l\",placeholder:\"Email\",onChange:function onChange(e){setemail(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input-fields-l\",minLength:6,placeholder:\"Password\",onChange:function onChange(e){setpassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Login\",className:\"btn-l solid\",onClick:login}),/*#__PURE__*/_jsx(Link,{className:\"btn text-white\",to:\"/forgotpassword\",children:\"Forgot Password ?\"}),/*#__PURE__*/_jsx(\"div\",{className:errortype,role:\"alert\",children:error})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"sign-up-form l-form\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title fw-bold\",children:\"Sign Up\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input-fields-r\",placeholder:\"Enter Full Name\",value:name,onChange:function onChange(e){setname(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"input-fields-r\",placeholder:\"Enter Email\",onChange:function onChange(e){setemail(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"span\",{id:\"Eerror\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"input-fields-r\",placeholder:\"Enter Contact Number\",value:contactNumber,onChange:function onChange(e){setcontactNumber(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"input-fields-r\",placeholder:\"Enter Date of Birth\",value:dob,onChange:function onChange(e){setdob(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"input-fields-r\",placeholder:\"Enter Aadhar Number\",value:adharNumber,onChange:function onChange(e){setadharNumber(e.target.value);},required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input-fields-r\",minLength:6,placeholder:\"Enter New Password\",value:password,onChange:function onChange(e){setpassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"input-fields-r\",minLength:6,placeholder:\"Confirm Password\",value:cPassword,onChange:function onChange(e){setCpassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",className:\"btn-l\",value:\"Sign up\",onClick:registerCustomer})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"panels-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"panel left-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content pt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"pt-5 pb-3\",children:\"New here ?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-l transparent w-100\",id:\"sign-up-btn\",children:\"Sign up\"})]}),/*#__PURE__*/_jsx(\"img\",{src:log,className:\"image-l\",alt:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"panel right-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content pt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"pt-5 pb-3\",children:\"One of us ?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-l transparent w-100\",id:\"sign-in-btn\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"img\",{src:register,className:\"image-l\",alt:\"\"})]})]})]})});};export default CustLoginRegister;","map":{"version":3,"sources":["A:/CDAC-EMS-Project-main/frontend/src/component/login/CustLoginRegister.js"],"names":["React","useEffect","useState","axios","authHeader","log","birthdaygif","register","useHistory","url","Link","toast","Swal","configure","CustLoginRegister","history","reset","setname","setemail","setcontactNumber","setdob","setadharNumber","setpassword","setCpassword","name","email","contactNumber","dob","adharNumber","password","cPassword","role","error","seterror","errortype","seterrortype","localStorage","getItem","push","login","e","preventDefault","customer","post","then","Response","data","jwt","setItem","JSON","stringify","console","catch","registerCustomer","Eerror","document","getElementById","test","textContent","fire","icon","title","text","footer","length","info","container","querySelector","classList","remove","style","color","sign_in_btn","sign_up_btn","addEventListener","add","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport axios from \"axios\";\nimport \"./LoginRegister.css\";\nimport authHeader from \"../services/auth-header\"\n\n\nimport log from \"../../images/log.svg\"\nimport birthdaygif from \"../../images/birthdaygif.gif\"\nimport register from \"../../images/register.svg\"\nimport { useHistory } from \"react-router-dom\";\nimport { url } from \"../common/constants\";\nimport { Link } from \"react-router-dom\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Swal from \"sweetalert2\";\ntoast.configure();\n\nconst CustLoginRegister = () => {\n  const history = useHistory();\n\n  const reset = () => {\n    setname(\"\");\n    setemail(\"\");\n    setcontactNumber(\"\");\n    setdob(\"\");\n    setadharNumber(\"\");\n    setpassword(\"\");\n    setCpassword(\"\");\n  }\n\n  const [name, setname] = useState(\"\");\n  const [email, setemail] = useState(\"\");\n  const [contactNumber, setcontactNumber] = useState(\"\");\n  const [dob, setdob] = useState(\"\");\n  const [adharNumber, setadharNumber] = useState(\"\");\n  const [password, setpassword] = useState(\"\");\n  const [cPassword, setCpassword] = useState(\"\");\n  const role = \"CUSTOMER\";\n  const [error, seterror] = useState(\"\");\n  const [errortype, seterrortype] = useState(\"\");\n\n\n  // for session management\n\n  if(localStorage.getItem('jwttoken') && localStorage.getItem('role')===\"CUSTOMER\" ) {\n    history.push(\"/customer/welcome\");\n  }\n\n\n  if( localStorage.getItem('jwttoken') && localStorage.getItem('role')===\"ADMIN\"){\n    history.push(\"/admin/welcome\")\n  }else if( localStorage.getItem('jwttoken') && localStorage.getItem('role')===\"MANAGER\"){\n    history.push(\"/manager/welcome\")\n  }else if( localStorage.getItem('jwttoken') && localStorage.getItem('role')===\"EMPLOYEE\"){\n    history.push(\"/employee/welcome\")\n  }\n\n\n\n  const login = (e) => {\n    e.preventDefault();\n    const customer = { email, password };\n    axios.post(url + \"/login\", customer, { authHeader }).then((Response) => {\n      if (Response.data.jwt)\n        localStorage.setItem('jwttoken', JSON.stringify(Response.data.jwt));\n\n      if (Response.data.role == '[ROLE_CUSTOMER]') {\n        localStorage.setItem('role', \"CUSTOMER\");\n        history.push(\"/customer/welcome\");\n      }\n      else {\n        setemail(\"\");\n        setpassword(\"\");\n        seterror(\"INVALID CREDENTIALS or AUTHORITY\");\n        seterrortype(\"alert-box\");\n        console.log('Something went wrong', error);\n      }\n\n    }\n    ).catch(error => {\n      setemail(\"\");\n      setpassword(\"\");\n      seterror(\"INVALID CREDENTIALS\");\n      seterrortype(\"alert-box\");\n      console.log('Something went wrong', error);\n    });\n  }\n\n  const registerCustomer = (e) => {\n    e.preventDefault();\n\n    const Eerror = document.getElementById(\"Eerror\");\n    if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(email)) {\n      Eerror.textContent = \"\";\n\n      if (/[1236547890!@#$%^&*()+=:;\"'<,>/_]/.test(name)) {\n        console.log(\"invalid Name\");\n        Swal.fire({\n          icon: 'error',\n          title: 'Only Alphabates and spaces are allowed in Name',\n          text: '',\n          footer: ''\n        })\n      } else {\n\n        if (password.length > 5) {\n          if (password === cPassword) {\n\n            if (contactNumber.length == 10 && adharNumber.length == 12) {\n              const customer = {\n                name,\n                email,\n                contactNumber,\n                dob,\n                adharNumber,\n                password,\n                role\n              }\n              toast.info(\"Registering Your Details, Please wait for a while.....\");\n              axios.post(url + \"/registration\", customer).then(Response => {\n                Swal.fire(\n                  ' You are Registered Successfully',\n                  '',\n                  'success'\n                )\n                history.push(\"/customer\");\n                const container = document.querySelector(\".container-l\");\n                container.classList.remove(\"sign-up-mode\");\n              }).catch(error => {\n                reset();\n\n                Swal.fire({\n                  icon: 'error',\n                  title: 'Something Went Wrong',\n                  text: '',\n                  footer: ''\n                })\n              });\n            }\n            else {\n              if (contactNumber.length != 10) {\n\n                console.log(\"invalid Contact Number\");\n                Swal.fire({\n                  icon: 'error',\n                  title: 'Please Check, Contact Number must be 10 digit',\n                  text: '',\n                  footer: ''\n                })\n              } else if (adharNumber.length != 12) {\n\n                console.log(\"invalid Adhar Number\");\n                Swal.fire({\n                  icon: 'error',\n                  title: 'Please Check, Adhar Number must be 12 digit',\n                  text: '',\n                  footer: ''\n                })\n              }\n\n            }\n\n          }\n          else {\n            console.log(\"invalid password not matched\");\n            Swal.fire({\n              icon: 'error',\n              title: 'Please Check Confirm Password should be same as Password',\n              text: '',\n              footer: ''\n            })\n          }\n        } else {\n          console.log(\"invalid password length\");\n          Swal.fire({\n            icon: 'error',\n            title: 'Password Length should be greater than 5',\n            text: '',\n            footer: ''\n          })\n        }\n      }\n\n    } else {\n      Eerror.textContent = \"You have entered an invalid email address!\";\n      Eerror.style.color = \"red\"\n    }\n  }\n\n  useEffect(() => {\n    const sign_in_btn = document.querySelector(\"#sign-in-btn\");\n    const sign_up_btn = document.querySelector(\"#sign-up-btn\");\n    const container = document.querySelector(\".container-l\");\n    sign_up_btn.addEventListener(\"click\", () => {\n      container.classList.add(\"sign-up-mode\");\n    });\n\n    sign_in_btn.addEventListener(\"click\", () => {\n      container.classList.remove(\"sign-up-mode\");\n    });\n  }\n  );\n  return (\n    <div>\n      <div className=\"container-l\">\n        <div className=\"forms-container\">\n          <div className=\"signin-signup\">\n            <form action=\"#\" className=\"sign-in-form l-form\">\n              <h2 className=\"title fw-bold\">Sign In</h2>\n              <input type=\"text\" className=\"input-fields-l\" placeholder=\"Email\" onChange={(e) => { setemail(e.target.value) }} required />\n              <input type=\"password\" className=\"input-fields-l\" minLength={6} placeholder=\"Password\" onChange={(e) => { setpassword(e.target.value) }} required />\n              <input type=\"submit\" value=\"Login\" className=\"btn-l solid\" onClick={login} />\n              <Link className=\"btn text-white\" to={\"/forgotpassword\"}>Forgot Password ?</Link>\n              <div className={errortype} role=\"alert\">{error}</div>\n            </form>\n            <form className=\"sign-up-form l-form\">\n              <h2 className=\"title fw-bold\">Sign Up</h2>\n              <input type=\"text\" className=\"input-fields-r\" placeholder=\"Enter Full Name\" value={name} onChange={(e) => { setname(e.target.value) }} required />\n\n              <input type=\"email\" className=\"input-fields-r\" placeholder=\"Enter Email\" onChange={(e) => { setemail(e.target.value) }} required />\n              <span id=\"Eerror\"></span>\n              <input type=\"number\" className=\"input-fields-r\" placeholder=\"Enter Contact Number\" value={contactNumber} onChange={(e) => { setcontactNumber(e.target.value) }} required />\n              <input type=\"date\" className=\"input-fields-r\" placeholder=\"Enter Date of Birth\" value={dob} onChange={(e) => { setdob(e.target.value) }} required />\n              <input type=\"number\" className=\"input-fields-r\" placeholder=\"Enter Aadhar Number\" value={adharNumber} onChange={(e) => { setadharNumber(e.target.value) }} required />\n              <input type=\"password\" className=\"input-fields-r\" minLength={6} placeholder=\"Enter New Password\" value={password} onChange={(e) => { setpassword(e.target.value) }} />\n              <input type=\"password\" className=\"input-fields-r\" minLength={6} placeholder=\"Confirm Password\" value={cPassword} onChange={(e) => { setCpassword(e.target.value) }} />\n              <input type=\"submit\" className=\"btn-l\" value=\"Sign up\" onClick={registerCustomer} />\n            </form>\n          </div>\n        </div>\n\n        <div className=\"panels-container\">\n          <div className=\"panel left-panel\">\n            <div className=\"content pt-5\">\n              <h2 className=\"pt-5 pb-3\">New here ?</h2>\n              <button className=\"btn btn-l transparent w-100\" id=\"sign-up-btn\"  >\n                Sign up\n              </button>\n            </div>\n            <img src={log} className=\"image-l\" alt=\"\" />\n          </div>\n          <div className=\"panel right-panel\">\n            <div className=\"content pt-5\">\n              <h2 className=\"pt-5 pb-3\">One of us ?</h2>\n              <button className=\"btn btn-l transparent w-100\" id=\"sign-in-btn\" >\n                Sign In\n              </button>\n            </div>\n            <img src={register} className=\"image-l\" alt=\"\" />\n          </div>\n        </div>\n      </div>\n\n    </div>\n  );\n};\n\nexport default CustLoginRegister;\n"]},"metadata":{},"sourceType":"module"}