{"ast":null,"code":"import _slicedToArray from\"A:\\\\CDAC-EMS-Project-main\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useEffect,useState}from'react';import axios from\"axios\";import{url}from'../common/constants';import jsPDF from\"jspdf\";import useRazorpay from\"react-razorpay\";import Swal from'sweetalert2';// import employeeService from '../services/employee.service';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ViewEvent=function ViewEvent(){var Razorpay=useRazorpay();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];var token=JSON.parse(localStorage.getItem(\"jwttoken\"));var init=function init(){console.log(token);axios.get(url+\"/regevents\",{headers:{\"authorization\":\"Bearer \".concat(token)}}).then(function(Response){console.log('Printing Event data',Response.data);setEvents(Response.data);}).catch(function(error){console.log('Something went wrong',error);});};var generatePDF=function generatePDF(){var doc=new jsPDF(\"landscape\",\"px\",\"c2\",true);doc.html(document.querySelector(\"#fordownload\"),{callback:function callback(pdf){pdf.save(\"BookingDetails.pdf\");}});};var HandlePayment=function HandlePayment(event){axios.post(url+\"/payment\",event,{headers:{\"authorization\":\"Bearer \".concat(token)}}).then(function(response){console.log(' data',response.data);console.log(' data',response.data.status);console.log(\"fff\");if(response.data.status==\"created\"){var options={key:'rzp_test_iU4N0Hfz8SDIJU',amount:event.totalCost,currency:'INR',name:\"\",description:'Order Payment',order_id:response.data.id,handler:function handler(response){console.log(response.razorpay_payment_id);console.log(response.razorpay_order_id);console.log(response.razorpay_signature);console.log(\"payment successful\");Swal.fire('Payment Done Successfully','','success');event.status=\"Approved\";axios.put(url+\"/eventinfo\",event,{headers:{\"authorization\":\"Bearer \".concat(token)}});},\"prefill\":{\"name\":\"\",\"email\":\"\",\"contact\":\"\"},\"notes\":{\"address\":\"\"},\"theme\":{\"color\":\"#3399cc\"}};var rzp=new Razorpay(options);rzp.on('payment.failed',function(response){alert(response.error.code);alert(response.error.description);alert(response.error.source);alert(response.error.step);alert(response.error.reason);alert(response.error.metadata.payment_id);alert(response.error.metadata.order_id);});rzp.open();}if(response.data==\"Insufficient Quantity\"){alert(\"Insufficient Quantity\");}if(response.data==\"bad_Request\"){alert(\"Wrong PAyment Details\");}}).catch(function(error){console.log('Something went wrong',error);});init();};useEffect(function(){init();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"forms-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"py-5 text-white my-5\",children:[/*#__PURE__*/_jsx(\"div\",{colSpan:\"2\",className:\"fw-bold p-3 display-6\",children:\"Event Details\"}),events.length==0?/*#__PURE__*/_jsx(\"div\",{className:\"mt-5 pt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white text-black p-3 mt-5 h1\",children:\"Please Register Any Event\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"accordion\",id:\"accordionExample\",children:events.map(function(event){return/*#__PURE__*/_jsxs(\"div\",{className:\"accordion-item m-3\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"accordion-header\",id:\"headingOne\",children:/*#__PURE__*/_jsx(\"button\",{className:\"accordion-button collapsed accordian-back\",type:\"button\",\"data-bs-toggle\":\"collapse\",\"aria-expanded\":\"false\",\"data-bs-target\":\"#collapse\"+event.id,\"aria-controls\":\"collapse\"+event.id,children:/*#__PURE__*/_jsx(\"h4\",{children:event.name})})}),/*#__PURE__*/_jsx(\"div\",{id:\"collapse\"+event.id,className:\"accordion-collapse collapse bg-black\",\"aria-labelledby\":\"headingOne\",\"data-bs-parent\":\"#accordionExample\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"accordion-body\",id:\"fordownload\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-black py-2 px-2 border border-2 border-white\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-start p-3 text-white\",children:\"Basic Details : \"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"table\",{className:\"col-10 table-bordered text-white\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Event Name: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Event Type: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Event Date: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Guest Count:\"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.name})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.type})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.date})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.guestCount})})]})]})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-start p-3 text-white\",children:\"Venue Details : \"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"table\",{className:\"col-10 table-bordered text-white\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Name: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Capacity: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Category: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Contact: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Cost: \"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.bookedVenue.name})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.bookedVenue.maxCapacity})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.bookedVenue.category})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.bookedVenue.contact})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"Rs.\",event.bookedVenue.cost]})})]}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"text-black\",colSpan:5,children:\"-----------------------------------------------\"})}),/*#__PURE__*/_jsx(\"tr\",{}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",colSpan:2,children:/*#__PURE__*/_jsx(\"h4\",{children:\"Address: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",colSpan:3,children:/*#__PURE__*/_jsx(\"h4\",{children:\"Description: \"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{colSpan:2,children:/*#__PURE__*/_jsx(\"h4\",{children:event.bookedVenue.address})}),/*#__PURE__*/_jsx(\"td\",{colSpan:3,children:/*#__PURE__*/_jsx(\"h4\",{children:event.bookedVenue.description})})]}),/*#__PURE__*/_jsx(\"tr\",{}),/*#__PURE__*/_jsx(\"tr\",{})]})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-start p-3 text-white\",children:\"Food Menu List : \"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"table\",{className:\"col-10 table-bordered text-white\",children:/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:event.menus.map(function(menu){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"h4\",{className:\"text-start px-3\",children:[menu.menuName,\" \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-secondary\",children:[\"(Price: \",menu.price,\"/person)\"]})]})},menu.id);})})})})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-start p-3 text-white\",children:\"Media Details : \"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsx(\"table\",{className:\"col-10 table-bordered text-white\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Photography: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Videography: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Album: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Drone Shoot: \"})}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-white text-black\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Crane Shoot: \"})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.photography?\"Yes\":\"No\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.videography?\"Yes\":\"No\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.album?\"Yes\":\"No\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.drone?\"Yes\":\"No\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"h4\",{children:event.crane?\"Yes\":\"No\"})})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-l mt-3\",onClick:generatePDF,children:\"Download Details\"}),/*#__PURE__*/_jsxs(\"button\",{className:event.totalCost==0||event.status==\"Approved\"?\"btn btn-l mt-3 disabled\":\"btn btn-l mt-3\",onClick:function onClick(){HandlePayment(event);},children:[\"PAY \",event.totalCost]})]})]}),/*#__PURE__*/_jsx(\"br\",{})]})})]},event.id);})})]})});};export default ViewEvent;","map":{"version":3,"sources":["A:/CDAC-EMS-Project-main/frontend/src/component/Customer/ViewEvent.js"],"names":["useEffect","useState","axios","url","jsPDF","useRazorpay","Swal","ViewEvent","Razorpay","events","setEvents","token","JSON","parse","localStorage","getItem","init","console","log","get","headers","then","Response","data","catch","error","generatePDF","doc","html","document","querySelector","callback","pdf","save","HandlePayment","event","post","response","status","options","key","amount","totalCost","currency","name","description","order_id","id","handler","razorpay_payment_id","razorpay_order_id","razorpay_signature","fire","put","rzp","on","alert","code","source","step","reason","metadata","payment_id","open","length","map","type","date","guestCount","bookedVenue","maxCapacity","category","contact","cost","address","menus","menu","menuName","price","photography","videography","album","drone","crane"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport axios from \"axios\";\nimport { url } from '../common/constants';\nimport jsPDF from \"jspdf\"\nimport useRazorpay from \"react-razorpay\";\nimport Swal from 'sweetalert2';\n\n// import employeeService from '../services/employee.service';\n\nconst ViewEvent = () => {\n    const Razorpay = useRazorpay();\n    const [events, setEvents] = useState([]);\n    const token = JSON.parse(localStorage.getItem(\"jwttoken\"));\n    const init = () => {\n        console.log(token);\n        axios.get(url + \"/regevents\", { headers: { \"authorization\": `Bearer ${token}` } })\n            .then(Response => {\n                console.log('Printing Event data', Response.data);\n                setEvents(Response.data);\n            })\n            .catch(error => {\n                console.log('Something went wrong', error);\n            })\n    }\n\n    const generatePDF = () => {\n        var doc = new jsPDF(\"landscape\", \"px\", \"c2\", true);\n        doc.html(document.querySelector(\"#fordownload\"), {\n            callback: function (pdf) {\n                pdf.save(\"BookingDetails.pdf\");\n            }\n        })\n\n    }\n    const HandlePayment = (event) => {\n \n        axios.post(url + \"/payment\", event, { headers: { \"authorization\": `Bearer ${token}` } })\n            .then(response => {\n                console.log(' data', response.data);\n                console.log(' data', response.data.status);\n                console.log(\"fff\")\n                if (response.data.status == \"created\") {\n\n                    let options = {\n                        key: 'rzp_test_iU4N0Hfz8SDIJU',\n                        amount: event.totalCost,\n                        currency: 'INR',\n                        name: \"\",\n                        description: 'Order Payment',\n                        order_id: response.data.id,\n                        handler: function (response) {\n                           console.log(response.razorpay_payment_id)\n                            console.log(response.razorpay_order_id)\n                            console.log(response.razorpay_signature)\n                            console.log(\"payment successful\")\n                            Swal.fire(\n                                'Payment Done Successfully',\n                                '',\n                                'success'\n                              )\n                            event.status=\"Approved\"\n                            axios.put(url + \"/eventinfo\",event, { headers: { \"authorization\": `Bearer ${token}` } })\n                        },\n                        \"prefill\": {\n                        \"name\": \"\",\n                        \"email\": \"\",\n                        \"contact\": \"\"\n                        },\n                        \"notes\": {\n                        \"address\": \"\"\n                        \n                        },\n                        \"theme\": {\n                        \"color\": \"#3399cc\"\n                        }\n                    }\n                   const rzp=new Razorpay(options)\n                    rzp.on('payment.failed', function (response){\n                        alert(response.error.code);\n                        alert(response.error.description);\n                        alert(response.error.source);\n                        alert(response.error.step);\n                        alert(response.error.reason);\n                        alert(response.error.metadata.payment_id);\n                        alert(response.error.metadata.order_id);\n                        });\n                        rzp.open();\n                        \n                }\n                if(response.data == \"Insufficient Quantity\"){\n                    alert(\"Insufficient Quantity\");\n                }\n                if(response.data == \"bad_Request\"){\n                    alert(\"Wrong PAyment Details\");\n                }\n            })\n            .catch(error => {\n                console.log('Something went wrong', error);\n                \n            })\n            init();\n    }\n    useEffect(() => {\n        init();\n    }, []);\n\n\n    return (\n\n        <div className=\"forms-container\">\n            <div className=\"py-5 text-white my-5\">\n                <div colSpan=\"2\" className=\"fw-bold p-3 display-6\">\n                    Event Details\n                </div>\n                {/* \"#collapseOne\" */}\n                {(events.length==0)?<div className='mt-5 pt-5'><div className=\"bg-white text-black p-3 mt-5 h1\">Please Register Any Event</div></div>:\n                <div className=\"accordion\" id=\"accordionExample\">\n                    {events.map((event) => (\n                        <div className=\"accordion-item m-3\" key={event.id}>\n                            <h2 className=\"accordion-header\" id=\"headingOne\">\n                                <button className=\"accordion-button collapsed accordian-back\" type=\"button\" data-bs-toggle=\"collapse\" aria-expanded=\"false\" data-bs-target={\"#collapse\" + event.id} aria-controls={\"collapse\" + event.id}>\n                                    <h4>{event.name}</h4>\n                                </button>\n                            </h2>\n                            <div id={\"collapse\" + event.id} className=\"accordion-collapse collapse bg-black\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\n                                <div className=\"accordion-body\" id=\"fordownload\">\n                                    <div className=\"bg-black py-2 px-2 border border-2 border-white\"  >\n                                        {/* <div className=\"event__box py-2 px-2 border border-2 border-white\"> */}\n                                        <h3 className=\"text-start p-3 text-white\">Basic Details : </h3>\n                                        <div className=\"d-flex justify-content-center\">\n                                            <table className=\"col-10 table-bordered text-white\"><tbody>\n                                                <tr>\n                                                    <td className=\"bg-white text-black\"><h4 >Event Name: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4 >Event Type: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4 >Event Date: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4 >Guest Count:</h4></td>\n                                                </tr>\n                                                <tr>\n                                                    <td><h4>{event.name}</h4></td>\n                                                    <td><h4>{event.type}</h4></td>\n                                                    <td><h4>{event.date}</h4></td>\n                                                    <td><h4>{event.guestCount}</h4></td>\n                                                </tr>\n                                            </tbody></table>\n\n                                        </div>\n                                        <h3 className=\"text-start p-3 text-white\">Venue Details : </h3>\n                                        <div className=\"d-flex justify-content-center\">\n                                            <table className=\"col-10 table-bordered text-white\"><tbody>\n                                                <tr>\n                                                    <td className=\"bg-white text-black\"><h4>Name: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4>Capacity: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4>Category: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4>Contact: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4>Cost: </h4></td>\n                                                </tr>\n                                                <tr>\n                                                    <td><h4>{event.bookedVenue.name}</h4></td>\n                                                    <td><h4>{event.bookedVenue.maxCapacity}</h4></td>\n                                                    <td><h4>{event.bookedVenue.category}</h4></td>\n                                                    <td><h4>{event.bookedVenue.contact}</h4></td>\n                                                    <td><h4>Rs.{event.bookedVenue.cost}</h4></td>\n                                                </tr>\n                                                <tr>\n                                                    <td className='text-black' colSpan={5}>-----------------------------------------------</td>\n                                                </tr>\n                                                <tr>\n                                                </tr>\n                                                <tr>\n                                                    <td className=\"bg-white text-black\" colSpan={2}><h4>Address: </h4></td>\n                                                    <td className=\"bg-white text-black\" colSpan={3}><h4>Description: </h4></td>\n                                                </tr>\n                                                <tr>\n                                                    <td colSpan={2}><h4>{event.bookedVenue.address}</h4></td>\n                                                    <td colSpan={3}><h4>{event.bookedVenue.description}</h4></td>\n                                                </tr>\n                                                <tr>\n                                                </tr>\n                                                <tr>\n                                                </tr>\n                                            </tbody></table>\n                                        </div>\n\n                                        <h3 className=\"text-start p-3 text-white\">Food Menu List : </h3>\n                                        <div className=\"d-flex justify-content-center\">\n                                            <table className=\"col-10 table-bordered text-white\"><tbody>\n                                                <tr><td>\n                                                    {event.menus.map((menu) => (\n                                                        <div key={menu.id}>\n                                                            <h4 className=\"text-start px-3\">{menu.menuName} <span className=\"text-secondary\">(Price: {menu.price}/person)</span></h4>\n                                                        </div>\n                                                    ))}\n                                                </td></tr>\n                                            </tbody></table>\n                                        </div>\n                                        <h3 className=\"text-start p-3 text-white\">Media Details : </h3>\n                                        <div className=\"d-flex justify-content-center\">\n                                            <table className=\"col-10 table-bordered text-white\"><tbody>\n                                                <tr><td className=\"bg-white text-black\"><h4>Photography: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4>Videography: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4>Album: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4>Drone Shoot: </h4></td>\n                                                    <td className=\"bg-white text-black\"><h4>Crane Shoot: </h4></td>\n                                                </tr>\n\n\n                                                <tr>\n                                                    <td><h4>{event.photography ? \"Yes\" : \"No\"}</h4></td>\n                                                    <td><h4>{event.videography ? \"Yes\" : \"No\"}</h4></td>\n                                                    <td><h4>{event.album ? \"Yes\" : \"No\"}</h4></td>\n                                                    <td><h4>{event.drone ? \"Yes\" : \"No\"}</h4></td>\n                                                    <td><h4>{event.crane ? \"Yes\" : \"No\"}</h4></td>\n                                                </tr>\n                                            </tbody></table>\n                                        </div>\n                                        <div className='text-center'>\n                                            <button className=\"btn btn-l mt-3\" onClick={generatePDF}>Download Details</button>\n                                            <button className={event.totalCost==0 || event.status==\"Approved\"?\"btn btn-l mt-3 disabled\":\"btn btn-l mt-3\"} onClick={()=>{HandlePayment(event)}}>PAY {event.totalCost}</button>\n                                        </div>\n                                    </div>\n                                    <br></br>\n                                </div>\n                            </div>\n                        </div>\n                    ))}\n                </div>}\n            </div>\n        </div>\n    );\n}\n\nexport default ViewEvent;\n"]},"metadata":{},"sourceType":"module"}